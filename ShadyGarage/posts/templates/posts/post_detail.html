{% extends "base.html" %}
{% load staticfiles %}
{% include "posts/comment_answers_modal.html" %}
{% block title %}Shady: {{post.post_title}} {% endblock %}
{% block body %}

<!--
  //TODO:Finne et bra nok design og implementere det.
-->
  <div class="post-detail-container">
    <div class="post-detail-username">
      <a href="{% url 'accounts:profile_page_pk' pk=post.user_fk.pk%}"><h2> {{post.user_fk.username}} </h2></a>
    </div>
    <div class="post-container">
        <h2 class="post-detail-post-title"> {{ post.post_title}} </h2>
        {% if post.post_image %}
        <img src="{{post.post_image.url}}" alt="" class="post-detail-image">
        {% endif %}

        <p class="post-detail-post-comment"> {{ post.post_description}} </p>
        <p> {{post.post_created|timesince}}
          <!--
            //TODO:!LANSERING! Bytte ut u=www.shadygarage.pythonanywhere.com/{{request.get_full_path}}" med  u=www.shadygarage.com/{{request.get_full_path}}
          -->
          <a href="https://www.facebook.com/sharer/sharer.php?u=shadygarage.pythonanywhere.com/{{request.get_full_path}}">
            <input type="image" src="{% static 'images/facebooklogo.png'%}" class="facebookShare" id="facebookSharePost"/>
          </a>
    </div>
    {% if request.user == post.user_fk %}
      <a href="{% url 'posts:post_delete' slug=post.slug %} " class="btn btn-danger">Slett post!</a>
      <a href="{% url 'posts:post_update' slug=post.slug %}" class="btn btn-info">Oppdater post!</a>
    {% endif %}

    <a class="post-detail-comment-button" href="{% url 'posts:post_comment' slug=post.slug%}">Kommenter</a>
    <div class="post-commentcontainer">
    {% for comment in post.post_comment_fk.all %}
      <div class="commentcontainer-comment">
        <div class="commentcontainer-userinfo">
          <div class="commentcontainer-userinfo-profilepiccontainer">
            <img class="commentcontainer-userinfo-profilepic" src="{{comment.user_fk.profile.profile_pic.url}}" alt="bilde">
          </div>
          <div class="commentcontainer-userinfo-textinfo">
            <p>Bruker: <a href="{%url 'accounts:profile_page_pk' pk=comment.user_fk.pk %}">{{comment.user_fk}}</a></p>
            <p>Dato: {{comment.created|date:'Y-m-d H:i'}}</p>
            <a href="{% url 'posts:post_comment_reply' slug=comment.post_fk.slug pk=comment.id%}" class="btn btn-warning btn-sm">Svar</a>
            <div class="comment-reply-container">
              {% for comment_answers in comment.reply_comment_fk.all %}
                <h4>{{comment_answers.comment}}</h4>
                <h4>Bruker: {{comment_answers.user_fk}}</h4>
                <h5>For: {{comment_answers.created|timesince}}</h5>
              {% endfor %}
            </div>
          </div>
        </div>
        <div class="commentcontainer-commentfield">
          <textarea>{{comment.comment}}</textarea>
          {% if request.user == comment.user_fk %}
            <a href="{% url 'posts:post_comment_delete' slug=post.slug pk=comment.id%}" class="btn btn-danger btn-sm">Slett</a>
          {% endif %}
        </div>
      </div>
    {% endfor %}

    </div>
  </div>

{% endblock %}

{% block script %}

{% endblock %}
