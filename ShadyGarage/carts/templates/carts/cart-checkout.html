{% extends "base.html" %}
{% load bootstrap3 %}
{% block body %}
  <div class="container">
    <h1>Checkout</h1>
    <div class="progress">
      <div class="progress-bar progress-bar-striped progress-bar-animated bg-info" id="fuel" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
      </div>
    </div>
    <div class="row">
      <div class="col-sm col">
        E
      </div>
      <div class="col-sm col" style="text-align:center;">
        <i class="fa fa-gas-pump"></i>
      </div>
      <div class="col-sm col" style="text-align:right;">
        F
      </div>
    </div>

    <h2>{{billing_profile.email}}</h2>
    <div class="shipping-address-container">
      <h3> Shippping addresse!</h3>
      <form method="POST" id="shipping-address-form" action='{% url 'addresses:create-address' %}'>
        {% csrf_token %}
        <input type="hidden" name="address_type" value="shipping"/>
        <input type="hidden" name="billing_profile" value="{{billing_profile.id}}">
        {%bootstrap_form address_form%}
        <input type="submit" class="btn btn-info" value="Lagre"/>
      </form>
    </div>
    <a href="#" onclick="filll()" class="btn btn-info">Fill </a>
  </div>
{% endblock %}
{% block script %}
  <script>
    function filll(width){
      document.getElementById("fuel").style.transition = "all 2s";
      document.getElementById("fuel").style.width = width;
    }


    $(document).ready(function(){
      $('#shipping-address-form').submit(function(event){
        event.preventDefault()
        $.ajax({
          url:'../../addresses/create_address/',
          method: 'POST',
          data: $('#shipping-address-form').serialize(),
          success:function(data){
            console.log(data.isShippingAddress)
            console.log(data.success)
            $(".shipping-address-container").hide();
            filll("50%");

          }, error:function(error){
            console.log("ERROR")
            console.log(error)
          }
        })

      })
    })
  </script>
{% endblock %}
